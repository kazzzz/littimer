<!DOCTYPE HTML>
<html lang="ja">
<head>
  <title>LTタイマーHTML5</title>
  <meta charset="utf-8" />
  <script type="text/JavaScript">
<!--

var ltLength = 300;
var timerId;

function loop() {
  if (timerId != null) {
    clearInterval(timerId);
  }
  ltLength = document.getElementById('lt_length').value;  
  if (ltLength != null && ltLength != "") {
    convertSec(ltLength);
  }
  var startTime = new Date();
  timerId = setInterval(
    function() {
      var currentTime = new Date();
      var elapsed = Math.round((currentTime - startTime) / 1000);
      var remain = ltLength - elapsed;
      convertSec(remain);
      if (remain == 0) {
        clearInterval(timerId);
      }
    },
    1000);
}


function convertSec(arg) {
  var min = Math.floor(arg / 60);
  var sec = Math.floor(arg % 60);
  if (min < 10) {
    min = "0" + min;
  }
  if (sec < 10) {
    sec = "0" + sec;
  }
  document.getElementById('rem_test').innerHTML = min + ':'+ sec;  
}

//-->
</script>

</head>
<body>

<input type="text" id="lt_length" />
<input type="button" onclick="loop();" value="タイマー開始"/>

<p>
残り時間：
<span id="rem_test">05:00</span>
</p>

</body>
</html>
